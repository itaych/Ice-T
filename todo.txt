ice-t
-----
move DLI code into VBI1 and disable DLI. (done)
read RT8 less often (after 59 frames, read every frame until change seen) (done)
move non essential (clock) code from VBI1 to VBI2. maybe use clock_update as flag. increment it rather than set to 1. (done)
arrange memory. perhaps move title screen texts into banked area. (done)
colors (done)
fine scroll will ruin DLI markers. must restore when leaving fscrol mode. (done)
improve code efficiency. jump tables (done)
colors not blanked when redrawing line during resize (done)
colors not blanked when erasing lines or partial screen clears (done)
use "H:" if no "D:" (done)
seol stuff in vt2.asm (done)
reset term when hanging up and dialing (done)
VT52 emulation plus keypad and arrows, not including graphics characters (done)
VT102 and ANSI-BBS emulation (done)
	- sources: http://www.vt100.net/docs/vt102-ug/chapter5.html
				http://bjh21.me.uk/all-escapes/all-escapes.txt
handle_insert_delete_char (done)
checkerboard character (^X) is broken in dbl width mode. (done)
graphics chars screw up when switching line to double width. (done)
some characters (tilde/grave accent/curly brackets) misbehave when switching line width. (done)
dump local file to terminal. jsr to dovt100?nocapture for each char.

file xfers:
	x/ymodem failed due to close3 (done)
	ymodem-g sent redundant ACKs (done)
	zmodem sent redundant XON (done)
	x/ymodem: is only 15K of 16K buffer being used? (done)
	ymodem-g: doesn't work on real atari (probably wontfix)
	zmpdem: initial ZRQINIT is not processed. (whatever, just send a ZRQINIT, zchallenge just causes trouble)
	zmodem: why do we request buffer size 3fff and not 4000? (done)
	zmodem: (linux) why does it overflow? (waiting for response from uwe)
	zmodem: (linux) breaks with -e option, hex packets ending with 0d 00 8a 11 instead of 0d 0a 11. (done)
	zmodem: implement 8K packets?
	xmodem upload: consider uncommenting. (altirra will break it though - can't send 0xff!)
	Altirra has broken printer driver. (fixed in 2.40)
	Altirra in "raw" mode, emulated Atari can receive any character, but cannot send 0xFF.
	Altirra "telnet" doesn't handle escape sequences properly so can't do any file transfer except Zmodem of plain text files.
	Altirra telnet doesn't identify as any terminal type.
	Altirra won't create a file if opening for append (aux1=9). DOS does create a blank file.
	Altirra R: breaks if you make outbound connection then coldstart while still connected.
colors:
	spaces should generate colors if background color is set. add flag bit to 'boldface' variable. see ptxreg.
		however space should always bold/unbold if overwriting an existing char!
		that should fix emacs tetris.
	colors are ugly if screen is inverse. perhaps have dual color table, one for regular one for inverse.
	maybe do black text by enabling inverse video. Then background color takes priority.
private extensions:
	NOTE: Esc Q or Esc R are 'private' unused codes.
	- Esc Qi M   enable bold without setting color. Any use of Esc [ _ m disables.
	- Esc Qi n1;c1;c2;c3;c4;c5 [;n2;c1;c2;c3;c4;c5].. C   set all 5 colors for horizontal lines. 255/absent = no change.
	- Esc Qi _ L   set(1)/unset(0 or blank) scroll lock for color background.
	- Esq Qi _ S/T    force scroll down/up color table by _ lines.
	
gen new icet.dat for release

known issues:
double width does not support 8-bit chars.
digraph characters are not correctly stored in text mirror, so may change when redrawing.
areas containing nothing but the checkerboard character may be considered blank by insert/delete char routines.
Flow control can cause visual bugs or crashes, especially when entering dial menu.
no proper detection of online status.

.loadsym C:\Emulators\Atari\ATasm\Projects\Ice-T\bin\icet.lab
e address byte
? expr

add to inittab or equivalent:
dt:12345:respawn:/sbin/agetty -L ttyS0 9600 vt100

or just: sudo /sbin/agetty -L ttyS0 9600 vt100

;tilmesg6
;	.byte	(80-77)/2,24,77
;	.byte	34,"Terminal je t'aime, I love you terminal, bella mia!",34," -Meir Ariel (1942-1999)"

col80:
------
hang when moving up in 'gandhi' txt file
garbage when moving up in icet doc
try to name unnamed labels/variables

.loadsym C:\Emulators\Atari\ATasm\Projects\Ice-T\Build\col80.lab
0d 0a
cr lf

lda v1
cmp v2
bcc ---> v1<v2
bcs ---> v1>=v2



------------
Telnet Negotiation on Altirra:

Ubuntu:  ff fd 18  ff fd 20  ff fd 23  ff fd 27
	Start use: term tpye, term speed, X location, env.option
Altirra: ff fc 18  ff fc 20  ff fc 23  ff fc 27             
	Won't use any of the above
Ubuntu:  ff fb 03  ff fd 01  ff fd 1f  ff fb 05  ff fd 21
	Will use Supress GA, Start use Echo, 1f. Will use 05, Start use 21.
Altirra: ff fd 03  ff fc 01  ff fc 1f  ff fe 05  ff fc 21
	Start use Supress GA, Won't use Echo, 1f. Stop use 05. Won't use 21.
Ubuntu:  ff fb 01                                         
	Will use Echo.
Altirra: ff fd 01            
	Start use Echo.

Telnet Negotiation on APE:

Ubuntu:  ff fd 18  ff fd 20  ff fd 23  ff fd 27            
	Start use: term type, term speed, X location, env.option
APE:     ff fb 18  ff fc 20  ff fc 23  ff fc 27                                                
	Will use term type. Won't use any of the others.
Ubuntu:  ff fa 18 01 ff f0
	Subnegotiate Term type, 1, end subnegotiation
APE:     ff fa 18 00 56 54 31 30 30 ff f0           
	Subnegotiate Term type, 0, "VT100", end subnegotiation
Ubuntu:  ff fb 03  ff fd 01  ff fd 1f  ff fb 05  ff fd 21
	Will use Supress GA, Start use Echo, 1f. Will use 05, Start use 21.
APE:     ff fd 03  ff fc 1f  ff fe 05  ff fc 21
	Start use Supress GA, Won't use 1f, Stop use 05, Won't use 21
Ubuntu:  ff fb 01                                         
	Will use Echo.
APE:     ff fd 01                                         
	Start use Echo.

With MS Telnet:

Ubuntu:  ff fd 18  ff fd 20  ff fd 23  ff fd 27
	Start use: term type, term speed, X location, env.option
MSTelnet:  ff fb 18 ff fb 1f  ff fc 20  ff fc 23  ff fb 27
	Will use term type, window size, env. option, not others.
Ubuntu:  ff fd 1f ff fa 27 01 ff f0 ff fa 18 01 ff f0
	Start using window size, subneg environment, term type. 
MSTelnet:  ff fa 1f 00 8c 00 32 ff f0
	Subnegotiate window size.
MSTelnet:  ff fa 27 00 ff f0 
    Subnegotiate environment option: 00.
           ff fa 18 00 41 4e 53 49 ff f0 (ANSI)
    Terminal type, 0, ANSI.		
Ubuntu:  ff fb 03 ff fd 01 ff fb 05 ff fd 21
MSTelnet:  ff fd 03 ff fb 01 ff fe 05 ff fc 21
Ubuntu:  ff fe 01 ff fb 01
MSTelnet:  ff fc 01
Ubuntu:  Ubuntu 13.10
MSTelnet:  ff fd 01
